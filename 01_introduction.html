<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Job Efficiency: Introduction</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="HPC Carpentry lesson about assessing job efficiency by HPC.NRW" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>


      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/01_introduction.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="HPC Carpentry lesson about assessing job efficiency by HPC.NRW" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Job Efficiency
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Job Efficiency
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Job Efficiency
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 0%" class="percentage">
    0%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 0%" aria-valuenow="0" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/01_introduction.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        1. Introduction
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#background">Background</a></li>
<li><a href="#part-1-example-for-an-inefficient-job">Part 1: Example for an inefficient job</a></li>
<li><a href="#part-2-about-hpc-power-consumption">Part 2: About HPC power consumption</a></li>
<li><a href="#so-whats-next">So what’s next?</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02_resourcerequirements.html">2. Resource Requirements</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03_schedulertools.html">3. Scheduler Tools</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04_scalingstudy.html">4. Scaling Study</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05_performancereports.html">5. Performance Overview</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06_pinning.html">6. Pinning</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07_bottlenecks.html">7. How to identify a bottleneck?</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08_accelerators.html">8. Performance of Accelerators</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09_nextsteps.html">9. Next Steps</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="02_resourcerequirements.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="02_resourcerequirements.html" rel="next">
          Next: Resource...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Introduction</h1>
        <p>Last updated on 2025-12-12 |

        <a href="https://github.com/stderr-enst/jobefficiency/edit/main/episodes/01_introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What exactly is job efficiency in the computing world?</li>
<li>Why would I care about job efficiency and what are potential
pitfalls?</li>
<li>How can I start measuring how my program performs?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to …</p>
<ul><li>Use timing commands provided by
<code>time</code>and<code>date</code>.</li>
<li>Understand the benefits of efficient jobs in terms of runtime and
numerical accuracy.</li>
<li>Have developed some awareness about the overall high energy
consumption of HPC.</li>
</ul></div>
</div>
</div>
</div>
</div>
<!--
Prerequisite: Bash https://swcarpentry.github.io/shell-novice/05-loop.html
-->


<!---the ratio of the useful work performed by a machine or in a process to the total energy expended or heat taken in
-->
<section><h2 class="section-heading" id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a></h2>
<hr class="half-width"><p>Job efficiency, as defined by Oxford’s English Dictionaries, is
<em>the ratio of the useful work performed by a machine […] to the total
energy expended or heat taken in</em>. In a high-performance-computing
(HPC) context, the useful work is the entirety of all calculations to be
performed by our (heat-generating) computers. Doing this efficiently
thus translates to maximizing the calculations completed in some limited
time span while minimizing the heat output. In more extreme words, we
want to avoid running big computers for <em>nothing but hot
air</em>.</p>
<p>One may object that a single user’s job may hardly have an effect on
an HPC system’s power usage since such systems are in power-on state
24/7 anyway. The same may be argued about air travel. The plane will
take off anyway, whether I board the plane or not. However, we indeed
have some leverage in contributing to efficiency, defined by fuel
consumption in air travel: traveling lightly, i.e., avoiding excessive
baggage will improve the airplane’s ratio <span class="math inline">\(\frac{useful\;work}{total\;energy\;expended}\)</span>.
So let’s get back to the ground and look at some inefficiencies in
computing jobs, while we will continue to use the air-travel
analogy.</p>
<div class="section level3">
<h3 id="time-to-sleep">
<code>time</code> to <code>sleep</code>
<a class="anchor" aria-label="anchor" href="#time-to-sleep"></a></h3>
<p>Let’s look at the command<code>sleep</code></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">sleep</span> 2</span></code></pre>
</div>
<p>This command triggers a “computer nap”. It actually delays whatever
would come next for the specified time, here 2 seconds. You can verify
that nap time using a stopwatch, the latter given by
the<code>time</code>command:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">time</span> sleep 2</span></code></pre>
</div>
<p>which will report something like</p>
<pre><code>real	0m2.002s
user	0m0.001s
sys	0m0.000s</code></pre>
<p>The <code>time</code> command shall be our first
performance-measuring tool. <code>time</code>has become a bit of a
<em>hello-world</em> equivalent in HPC contexts. This command gives you
a breakdown of how your program uses CPU (Central Processing Unit) and
wall-clock time. The standard output of <code>time</code> reports three
fields, <em>real</em>, <em>user</em> and <em>sys</em>:</p>
<table class="table"><colgroup><col width="8%"><col width="91%"></colgroup><tbody><tr class="odd"><td>Time</td>
<td>Meaning</td>
</tr><tr class="even"><td>real</td>
<td>Wall-clock time = total runtime as seen on a stopwatch</td>
</tr><tr class="odd"><td>user</td>
<td>Time spent in <em>user</em>-mode: actual computations like math,
loops, logic</td>
</tr><tr class="even"><td>sys</td>
<td>Time spent in OS’s <em>kernel</em>-mode (system calls): I/O =
reading/writing files, handling memory, talking to other devices</td>
</tr></tbody></table><p>The above<code>sleep</code>command abstains from any kind of math,
I/O, or other work that would show up in <em>user</em> or <em>sys</em>
time, hence these entries show (almost) zero.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> time or /usr/bin/time? that’s the question </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>The<code>time</code>command is both a keyword directly built into the
Bash shell as well as an executable file, usually residing
under<code>/usr/bin/time</code>. While very similar, they are not
exactly the same. Shell/Bash keywords take precedence, so preceding a
command with<code>time</code>invokes the shell keyword. Therefore, if
you want to force the usage of<code>/usr/bin/time</code>, you would
do</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Explicitly calling the `time` binary</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">$</span> /usr/bin/time sleep 2</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="ex">0.00user</span> 0.00system 0:02.00elapsed 0%CPU <span class="er">(</span><span class="ex">0avgtext+0avgdata</span> 2176maxresident<span class="kw">)</span><span class="ex">k</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="ex">0inputs+0outputs</span> <span class="er">(</span><span class="ex">0major+90minor</span><span class="kw">)</span><span class="ex">pagefaults</span> 0swaps</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co"># Compare the output to the Bash built-in:</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="ex">$</span> time sleep 2</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="ex">real</span>	0m2,003s</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="ex">user</span>	0m0,001s</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="ex">sys</span>	0m0,003s</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co"># Yet another output of `time` in zsh, an alternative shell implementation to bash</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="ex">$</span> time sleep 2</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="fu">sleep</span> 2  0,00s user 0,00s system 0% cpu 2,003 total</span></code></pre>
</div>
<p>Notice the different output formatting. All tools provide similar
insight, but the formatting and exact information may differ. So, if you
saw something that looks different from the bash built-in command, this
may be why!</p>
<p>Further note, that shell keyword documentation is invoked
via<code>help &lt;KEYWORD&gt;</code>, for example
<code>help time</code>, while most executables have manual pages,
e.g.,<code>man time</code>. At last, you can prefix the shell keyword
with a backslash in order to stop Bash from evaluating it,
so<code>\time sleep 2</code>will revert
to<code>/usr/bin/time</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="time-for-a-date">Time for a <code>date</code>
<a class="anchor" aria-label="anchor" href="#time-for-a-date"></a></h3>
<p>The<code>date</code>command, as its manpage (<code>man date</code>)
says, prints or sets the system date and time. In fact, this gives us a
super accurate stopwatch when used like this:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">date</span> +%s.%N</span></code></pre>
</div>
<p>reports a point in time as a number of seconds elapsed since a fixed
reference point.</p>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Epoch time </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>A referenced time point is also referred to as Epoch time, where,
according to the manpage of<code>date</code>, the (default) reference
point is the beginning of the year 1970, given as “1970-01-01 00:00
UTC”.</p>
</div>
</div>
</div>
</div>
<p>While<code>%s</code>invokes output of a referenced time, the
additional specifier<code>%N</code>enforces an accuracy down to
nanoseconds. Give it a try and you will see a large number (of seconds)
followed by 9 digits after the decimal point.</p>
<div id="an-accurate-stopwatch-date" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="an-accurate-stopwatch-date" class="callout-inner">
<h3 class="callout-title">An accurate stopwatch: <code>date</code>
</h3>
<div class="callout-content">
<p>You can use the construct<code>date +%s.%N</code>on the command line
or in a Bash script to save start and end time points as a variable:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="va">start</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># ... run some command(s)</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="va">end</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span></span></code></pre>
</div>
<p>This gives you a stopwatch by setting a start time, running some
<strong>command(s)</strong>, and then storing the end time after
<strong>command(s)</strong> into a second variable. Differencing the two
times produces the elapsed time. Give this a try with
the<code>sleep</code>command in between.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Differencing two numbers can be done, among other ways, using
the<code>bc</code>calculator tool:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"</span><span class="va">$end</span><span class="st"> - </span><span class="va">$start</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="va">start</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">sleep</span> 2</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="va">end</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"</span><span class="va">$end</span><span class="st"> - </span><span class="va">$start</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="part-1-example-for-an-inefficient-job">Part 1: Example for an inefficient job<a class="anchor" aria-label="anchor" href="#part-1-example-for-an-inefficient-job"></a></h2>
<hr class="half-width"><p>After warming up with some timing methods, let’s analyze the
efficiency of a small script that makes our computer sweat a bit more
than the<code>sleep</code>command. Have a look at the following Bash
shell 7-liner.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="va">sum</span><span class="op">=</span>0</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="va">$(</span><span class="fu">seq</span> 1 1000<span class="va">)</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="va">val</span><span class="op">=</span><span class="kw">`</span><span class="bu">echo</span> <span class="st">"e(2 * l(</span><span class="va">${i}</span><span class="st">))"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span><span class="kw">`</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="va">sum</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="st">"</span><span class="va">$sum</span><span class="st"> + </span><span class="va">$val</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span><span class="va">)</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="cf">done</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="bu">echo</span> Sum=<span class="va">$sum</span></span></code></pre>
</div>
<p>Copy-paste this to a file, say<code>sum.bash</code>, and make it
executable via</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">chmod</span> u+x sum.bash</span></code></pre>
</div>
<p>The main part of this shell script consists of
a<code>for</code>statement which is calculating the sum of all squares
<span class="math inline">\(i^2\)</span> for 1000 iterations; note
that<code>seq 1 1000</code>creates the number sequence (<span class="math inline">\(i=1,2,3,...,1000\)</span>). Inside the
<code>for</code>loop the<code>bc</code>calculator tool is employed. The
first statement inside the loop (<code>val=...</code>) prints the
expression <code>e(2 * l(${i}))</code>, which is <code>bc</code>-talk
for the expression <span class="math inline">\(i^2\)</span> because of
the relation <span class="math inline">\(i^x=e^{x\cdot \ln(i)}\)</span>,
for example <span class="math inline">\(e^{2\cdot\ln(3)}=3^2\)</span>,
where ln is the natural logarithm. The second statement inside the loop
(<code>sum=...</code>) accumulates the expressions
<code>val=</code><span class="math inline">\(i^2\)</span>
into<code>sum</code>, so the output of the final<code>echo</code>line is
the total, <span class="math inline">\(\sum_{i=1}^{1000}i^2\)</span>.</p>

<div id="identify-the-inefficient-pieces" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="identify-the-inefficient-pieces" class="callout-inner">
<h3 class="callout-title">Identify the inefficient pieces</h3>
<div class="callout-content">
<p>In the above Bash script, the<code>for</code>loop invokes the
<code>bc</code>calculator twice during every loop iteration. Compared to
another method to be investigated below, this method is rather slow. Any
idea why that is the case?</p>
</div>
</div>
</div>
<div id="accordionHint2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint2" aria-expanded="false" aria-controls="collapseHint2">
  <h4 class="accordion-header" id="headingHint2"> Give me a hint </h4>
</button>
<div id="collapseHint2" class="accordion-collapse collapse" aria-labelledby="headingHint2" data-bs-parent="#accordionHint2">
<div class="accordion-body">
<p>Each statement<code>echo … | bc -l</code>spawns a
new<code>bc</code>process via a subshell.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The statement<code>echo … | bc -l</code>spawns a
new<code>bc</code>process via a subshell. Here, each loop iteration
invokes two of those. Each subshell is essentially a separate process
and involves a certain startup cost, parsing overhead, and OS-internal
inter‑process communication. Such overhead will account for most of the
total runtime of<code>sum.bash</code>.</p>
</div>
</div>
</div>
</div>
<p>The overhead in this shell script is dominated by process creation
and context switching, that is, calling the<code>bc</code>tool so many
times. Going back to our air-travel analogy, the summation of 1000
numbers shall be equivalent to having a total of 1000 passengers board a
large plane. When total boarding time counts, an inefficient boarding
procedure would involve every passenger loading two carryon pieces. Many
of you may have experienced, how stuffing an excessive number of baggage
pieces into the overhead compartments can slow things down in the
plane’s aisles, similar to the overhead due to the 2000 (two for each
loop iteration)<code>bc</code>sub-processes that hinder the data stream
inside the CPU’s “aisles”.</p>
<div id="lets-pull-out-our-stopwatches" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="lets-pull-out-our-stopwatches" class="callout-inner">
<h3 class="callout-title">Let’s pull out our stopwatches</h3>
<div class="callout-content">
<p>Using either<code>time</code>or<code>date</code>, can you get a
runtime measurement for<code>sum.bash</code>?</p>
</div>
</div>
</div>
<div id="accordionHint3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint3" aria-expanded="false" aria-controls="collapseHint3">
  <h4 class="accordion-header" id="headingHint3"> Give me a hint </h4>
</button>
<div id="collapseHint3" class="accordion-collapse collapse" aria-labelledby="headingHint3" data-bs-parent="#accordionHint3">
<div class="accordion-body">
<p>You can precede any command with<code>time</code>. If you want to
use<code>date</code>, remember that<code>now=$(date +%s.%N)</code>lets
you store the current time point and<code>&amp;&amp;</code>lets you join
commands together.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>A straightforward way is</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">time</span> ./sum.bash</span></code></pre>
</div>
<p>Alternatively,<code>date</code>and<code>&amp;&amp;</code>can be
combined to a wrapper in order to
time<code>sum.bash</code>externally,</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="va">start</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span> <span class="kw">&amp;&amp;</span> <span class="ex">./sum.bash</span> <span class="kw">&amp;&amp;</span> <span class="va">end</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span> <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> <span class="st">"</span><span class="va">$end</span><span class="st"> - </span><span class="va">$start</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span></span></code></pre>
</div>
<p>Another option is to place<code>date</code>inside the
script<code>sum.bash</code>,</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="va">start</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span> <span class="co"># set start time</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="va">sum</span><span class="op">=</span>0</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="va">$(</span><span class="fu">seq</span> 1 1000<span class="va">)</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="va">val</span><span class="op">=</span><span class="kw">`</span><span class="bu">echo</span> <span class="st">"e(2 * l(</span><span class="va">${i}</span><span class="st">))"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span><span class="kw">`</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="va">sum</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="st">"</span><span class="va">$sum</span><span class="st"> + </span><span class="va">$val</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span><span class="va">)</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="cf">done</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="va">end</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%s.%N<span class="va">)</span> <span class="co"># set end time</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="bu">echo</span> Sum=<span class="va">$sum</span> runtime=<span class="kw">`</span><span class="bu">echo</span> <span class="st">"</span><span class="va">$end</span><span class="st"> - </span><span class="va">$start</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span><span class="kw">`</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="speeding-things-up">Speeding things up<a class="anchor" aria-label="anchor" href="#speeding-things-up"></a></h3>
<p>A remedy to the inefficiencies we found inside
the<code>for</code>loop of<code>sum.bash</code>is to avoid the spawning
of many sub-processes that are caused by repetitively
calling<code>bc</code>. In other words, ideally, the many sub-processes
conflate into one. In terms of the airplane analogy, we want people to
store all their carryon pieces in a big container, where its subsequent
loading onto the plane is a single process, as opposed to every
passenger running a proprietary sub-process. Collapsing things into one
sub-processes can be achieved by replacing the external loop by
a<code>bc</code>-internal one:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"s=0; for(i=1; i&lt;=1000; i++)s+=i^2; s"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span></span></code></pre>
</div>
<p>In this method, to be called the <em>one-liner</em>, the loop,
arithmetic, and accumulation are free of the overhead. This example
shall be a placeholder for a common scenario, where potentially large
efficiency gains can be achieved by replacing inefficient math
implementations by numerically optimized software
<em>libraries</em>.</p>
<div id="evaluate-the-runtime-improvement" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="evaluate-the-runtime-improvement" class="callout-inner">
<h3 class="callout-title">Evaluate the runtime improvement</h3>
<div class="callout-content">
<p>Compare the runtimes of the summation
script<code>sum.bash</code>versus the one-liner.</p>
</div>
</div>
</div>
<div id="accordionHint4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint4" aria-expanded="false" aria-controls="collapseHint4">
  <h4 class="accordion-header" id="headingHint4"> Give me a hint </h4>
</button>
<div id="collapseHint4" class="accordion-collapse collapse" aria-labelledby="headingHint4" data-bs-parent="#accordionHint4">
<div class="accordion-body">
<p>The Bash keyword<code>time</code>is sufficient to see the runtime
difference.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>You can use<code>time</code>for both summation methods,</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="bu">time</span> ./sum.bash</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="bu">time</span> echo <span class="st">"s=0; for(i=1; i&lt;=1000; i++)s+=i^2; s"</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>While it depends a bit on the employed hardware, one will notice that
the one-liner runs roughly 1000 times faster than<code>sum.bash</code>.
Of course, one could live with this inefficiency when it is just needed
once in a while and the script’s overall runtime amounts to just a few
seconds. However, imagine some large-scale computing job that is
supposed to finish within an hour on a supercomputer for which one has
to pay a usage fee on a per-hour basis. If implemented poorly, an
already small overhead increase, say by a factor of 2, would render this
computing job expensive, both in terms of time and money.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> CPU-bound versus memory-bound </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>The above runtime comparisons merely look at calculation speed, which
depends on CPU processing speed. Such a task is thus called
<em>CPU-bound</em>. On the other hand, the performance of a
<em>memory-bound</em> process is limited by the speed of memory access.
This happens when the CPU spends most of its time waiting for data to be
fetched from memory (RAM), cache, or storage, causing its execution
pipeline to stall. Optimization of memory-bound tasks addresses
performance bottlenecks due to data transfer speeds rather than
calculation speeds. Finally, when data transfer involves a high
percentage of disk or network access, disk/networking speed becomes a
limiting factor, rendering a process <em>I/O-bound</em>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="to-be-precise-numerical-efficiency">To be precise: Numerical efficiency<a class="anchor" aria-label="anchor" href="#to-be-precise-numerical-efficiency"></a></h3>

<p>Inefficient computing is not only limited to being unnecessarily
slow. It can also entail the scenario where an excessive accuracy can
lead to unnecessary runtime increases. Without going into details, let’s
just keep in mind that in computing, accuracy depends on the
<em>precision</em> of the numbers that are being processed by the CPU.
Precision essentially governs how many digits after the decimal point
are accounted for in mathematical operations. The higher the precision,
the fewer calculations can be processed within a fixed time. On the
other hand, within that same time, the CPU can crank through more
low-precision numbers; however, an insufficient precision can render
lengthy calculations useless. The optimal degree of precision, in terms
of computing efficiency, is application dependent.</p>
<!---
The internal accuracy of`bc`is defined by an adjustable parameter`scale`which
defines how some operations use digits after the decimal point. The default value of`scale`is 0.
During each`bc`call within the summation loop of`sum.bash`, the intermediate result is rounded
according to the current setting of`scale`. An insufficiently low precision setting
leads to an accumulation of rounding errors over many loop iterations,
rendering the final result (like a sum or product) erroneous.--->
<div id="compare-numerical-results" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="compare-numerical-results" class="callout-inner">
<h3 class="callout-title">Compare numerical results</h3>
<div class="callout-content">
<p>Our summation implementation via<code>sum.bash</code>exemplifies the
case of an inaccurate calculation. When running the two summation
methods in the previous challenge, have a look at the actual summation
results. Which of the two end results do you think is more accurate and
why? Is the erroneous result smaller or larger and why?</p>
</div>
</div>
</div>
<div id="accordionHint5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint5" aria-expanded="false" aria-controls="collapseHint5">
  <h4 class="accordion-header" id="headingHint5"> Give me a hint </h4>
</button>
<div id="collapseHint5" class="accordion-collapse collapse" aria-labelledby="headingHint5" data-bs-parent="#accordionHint5">
<div class="accordion-body">
<p>Think of another airplane example. Which scenario is more prone to
things getting lost or forgotten? 1) Passengers bring and take their own
baggage pieces to the cabin, or 2) Baggage pieces are stored and
retrieved collectively.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>The method<code>sum.bash</code>, using the
external<code>for</code>loop, and the one-liner return the final sums,
respectively,</p>
<pre><code><span><span class="fl">103075329</span>  <span class="co"># bc, external loop (sum.bash)</span></span>
<span><span class="fl">333833500</span>  <span class="co"># bc, internal loop (one-liner)</span></span></code></pre>
<p>where the first result may vary on your machine. The
method<code>sum.bash</code>is affected by the setting of the
<code>bc</code>-internal parameter<code>scale</code>which defines how
some operations, here the exponential function <strong>e(…)</strong> and
logarithm <strong>ln(…)</strong> use digits after the decimal point. The
default value of<code>scale</code>is 0, which basically leads to
truncations after the decimal point, so rounding errors accumulate at
every loop iteration. Hence, the final sum drifts downward (by a lot)
compared to the second (true) value. Of course,<code>scale</code>can be
increased. The manpage of<code>bc</code>actually says that it is “an
arbitrary precision calculator language”.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="part-2-about-hpc-power-consumption">Part 2: About HPC power consumption<a class="anchor" aria-label="anchor" href="#part-2-about-hpc-power-consumption"></a></h2>
<hr class="half-width"><p>The <em>HP</em> (high performace) in HPC refers to the fact that the
employed computer hardware is able to do a lot of multitasking, also
called parallel computing. Parallel programming essentially exploits the
CPU’s multitasking ability. Therefore, a lot of HPC-efficiency aspects
revolve around keeping everyone in a CPU’s multitasking team equally
busy. We will look at some of those aspects during the course of later
episodes.</p>

<div class="section level3">
<h3 id="the-more-the-merrier-cpugpu-cores">The more the merrier: CPU/GPU cores<a class="anchor" aria-label="anchor" href="#the-more-the-merrier-cpugpu-cores"></a></h3>
<p>Common parallel-computing jobs employ multiple cores of a CPU, or
even multiple CPUs, simultaneously. A core is a processing unit within a
CPU that independently executes instructions. These days (as of 2025),
typical CPUs are quad-core (4 cores), octa-core (8 cores), and so on.
High-end gaming CPUs often have 16+ cores, HPC cluster nodes feature
multiple CPUs, oftentimes with 64+ cores each; and all these numbers
keep going up.</p>
<p>Nowadays, almost all HPC centers are also equipped with GPU (Graphics
Processing Unit) hardware. Such hardware is optimal for jobs where
<em>many cores</em> is more important than fewer powerful cores.<br>
The number of GPU cores varies greatly depending on the model, ranging
from a few hundred in low-end GPU cards to over 16,000 in high-end
ones.</p>
</div>
<div class="section level3">
<h3 id="measuring-parallel-runtime-core-hours">Measuring parallel runtime: core hours<a class="anchor" aria-label="anchor" href="#measuring-parallel-runtime-core-hours"></a></h3>
<p>Owing to the inherent parallelism in the HPC world, people came up
with some measure which takes the <em>granularity</em> into account when
allocating not only runtime but also the number of requested cores. The
unit <strong>core hour</strong> (<strong>core-h</strong>) represents the
usage of one CPU core for one hour and scales with core count. For
example, assume you have a monthly allocation of 500 core-h, with a fee
incurred when exceeding that quota. So with 500 core-h, you could run a
one-hour parallel job utilizing 500 CPU cores for free. Or, in the other
extreme, if your program does not or cannot multitask, you could run a
single-core job for 500 hours, provided you won’t forget at the end what
this job was about.</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Other HPC resource types </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" aria-labelledby="headingSpoiler4" data-bs-parent="#accordionSpoiler4">
<div class="accordion-body">
<p>So far, the focus has been on core number and hours for HPC resource
allocation. Keep in mind, however, that the HPC resource portfolio
involves other hardware components as well:</p>
<ul><li>Memory: There are (whether parallel or not) jobs, that request a
large amount of memory (RAM). For example, some mathematical solution
methods for large equation systems do not allow the compartmentalization
of the total required memory across CPU cores, that is, many-core
processes need to know each other’s memory chunks. HPC centers usually
have large-memory nodes assigned for such applications.</li>
<li>Storage: Other applications process huge amounts of data, think of
genomics or climate modelling, which can involve terabytes or even
petabytes of data to be stored and analyzed.</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="a-typical-hpc-computing-job">A typical HPC computing job<a class="anchor" aria-label="anchor" href="#a-typical-hpc-computing-job"></a></h3>
<p>Like in the automotive world, high performance means high power,
which in turn involves a high energy demand. Let’s consider a typical
parallel scientific-computing job to be run in some HPC center. Our
example job shall be deemed too large for one CPU, so it employs
multiple CPUs, which in turn are distributed across nodes. Node power
usage is measured in W=Watt, which is the SI unit of power and
corresponds to the rate of consumption of energy in an electric circuit.
One compute node with a 64-core CPU can consume between 300 W in idle
state, and 900 W (maximum load) for air-cooled systems, whereas this
range is roughly 250-850 W for the slightly more efficient liquid-cooled
systems. For comparison, an average coffee maker consumes between 800 W
(drip coffee maker) and 1500 W (espresso machine). Our computing job
shall then use these resources:</p>
<ul><li>12 nodes are crunching numbers in parallel</li>
<li>64 cores/node (e.g., Intel® Xeon® 6774P, or AMD® EPYC® 9534)</li>
<li>12 hours of full load (realistic for many scientific
simulations)</li>
<li>Power per node: (idle vs. full load):
<ul><li>Idle: ~300 W</li>
<li>Full load: ~900 W</li>
<li>Extra power per node: 600 W</li>
</ul></li>
<li>Total extra power: 12 nodes × 600 W × 12 hours = 86,400 Wh = 86.4
kWh</li>
</ul><div id="how-many-core-hours-does-this-job-involve" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="how-many-core-hours-does-this-job-involve" class="callout-inner">
<h3 class="callout-title">How many core hours does this job
involve?</h3>
<div class="callout-content">
<p>HPC centers have different job <em>queues</em> for different kinds of
computing jobs. For example, a queue named <em>big-jobs</em> may be
reserved for jobs exceeding a total of 1024 parallel processes =
<em>tasks</em>. Another queue named <em>big-mem</em> may accomodate
tasks with high memory demands by giving access to high-memory nodes
(e.g., 512 GB, 1 TB, or more RAM per compute node).</p>
<p>Let’s assume, you have three job queues available, all with identical
memory layout:</p>
<ul><li>
<code>small-jobs</code>: Total task count of up to 511.</li>
<li>
<code>medium-jobs</code>: Total task count 512-1023.</li>
<li>
<code>big-jobs</code>: Total task count of 1024 or more.</li>
</ul><p>When submitting the above computing job, in which queue would it end
up? And, if there would be a charge of 1 Cent per core-h, what is the
total cost in € (1€ = 100 Cents)?</p>
</div>
</div>
</div>
<div id="accordionHint6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint6" aria-expanded="false" aria-controls="collapseHint6">
  <h4 class="accordion-header" id="headingHint6"> Give me a hint </h4>
</button>
<div id="collapseHint6" class="accordion-collapse collapse" aria-labelledby="headingHint6" data-bs-parent="#accordionHint6">
<div class="accordion-body">
<p>The total number of tasks results from the product
<em>cores-per-node</em> <span class="math inline">\(\times\)</span>
<em>nodes</em>. Total core hours is the task count multiplied by the
job’s requested time in hours.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>The total number of tasks is <em>cores-per-node</em> <span class="math inline">\(\times\)</span> <em>nodes</em> = <span class="math inline">\(64\times 12 = 768\)</span>, which would put the
job into the<code>medium-jobs</code>queue. The HPC center would bill us
for <span class="math inline">\(64\times 12\times 12 = 9216\)</span>
core hours, hence €92.16.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="what-are-watt-hours">What are Watt hours?<a class="anchor" aria-label="anchor" href="#what-are-watt-hours"></a></h3>
<p>The unit Wh (Watt-hours) measures energy, so 86,400 Wh is the energy
that a 86,400 W (or 86.4 kW, k=kilo) powerful machine consumes in one
hour. Back to coffee, brewing one cup needs 50-100 Wh, depending on
preparation time and method. So, running your 12-node HPC job for 12
hours is equivalent to brewing between 864 and 1,728 cups of coffee. For
those of us who don’t drink coffee, assuming 100% conversion efficiency
from our compute job’s heat to mechanical energy, which is unrealistic,
we could lift an average African elephant (~6 tons) about 5,285 meters
straight up, not quite to the top but in sight of Mount Kilimanjaro’s
(5,895 m) summit.</p>
<div id="accordionSpoiler5" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler5" aria-expanded="false" aria-controls="collapseSpoiler5">
  <h3 class="accordion-header" id="headingSpoiler5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Power-consuming hardware pieces </h3>
</button>
<div id="collapseSpoiler5" class="accordion-collapse collapse" aria-labelledby="headingSpoiler5" data-bs-parent="#accordionSpoiler5">
<div class="accordion-body">
<p>Note that the focus is on <strong>extra</strong> power, that is,
beyond the CPU’s idle state. Attributing our job’s extra power only to
CPU usage underestimates its footprint. In practice, the actual delta
from idle to full load will vary based on the load posed on other
hardware components. Therefore, it is interesting to shed some light
onto those other hardware components that start gearing up after hitting
that Enter key which submits the above kind of HPC job.</p>
<ul><li>
<p>CPUs consume power through two main processes:</p>
<ol style="list-style-type: decimal"><li>Dynamic power consumption: It is caused by the constant switching of
transistors and is influenced by the CPU’s clock frequency and
voltage.</li>
<li>Static power consumption: It is caused by small leakage currents
even when the CPU is idle. This is a function of the total number of
transistors.</li>
</ol><p>Both processes convert electrical energy into heat, which makes CPU
cooling so important.</p>
</li>
<li><p>Memory (DRAM) consumes power primarily through its refresh
cycles. These are required to counteract the charge leakage in the
data-storing capacitors. Periodic refreshing is necessary to maintain
data integrity, which is the main reason why DRAM draws power even when
idle. Other power consumption factors include the static power drawn by
the memory’s circuitry and the active power used during read/write
operations.</p></li>
<li><p>Network interface cards (NICs) consume power by converting
digital data into electrical signals for transmission and reception.
Power draw increases with data throughput, physical-media complexity,
like fiber optics, and also depends on the specific interconnect
technology used.</p></li>
<li><p>Storage components: Hard drives (HDDs) require constant energy
due to moving mechanical parts, like the disc-spinning motors. SSDs
store data electronically via flash memory chips and are thus more
power-efficient, especially when idle. However, when performing heavy
read/write tasks, SSD power consumption can also be significant, though
they complete these tasks faster than HDDs and return to their idle
state sooner.</p></li>
<li>
<p>Cooling is one of the biggest contributors to total energy use in
HPC:</p>
<ul><li>Idle: Cooling uses ~10–20% of total system power.</li>
<li>Max load: Cooling can consume ~50–70% of total power (depends on
liquid- or air-cooled systems).</li>
</ul><p>Cooling is essential because all electrical circuits generate heat
during operation. Under heavy computational loads, insufficiently cooled
CPUs and GPUs exceed their safe temperature limits.</p>
</li>
</ul></div>
</div>
</div>
</div>
<p>These considerations hopefully highlight why there is benefit in
identifying potential efficiency bottlenecks before submitting an
energy-intense HPC job. If all passengers care about efficient job
design, i.e., the total baggage load, more can simultaneously jump onto
the HPC plane.</p>
<!---
 Use timing commands provided by `time`and`date`.
- Understand the benefits of efficient jobs in terms of runtime and numerical accuracy.
- Have developed some awareness about the overall high energy consumption of HPC.
--->
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Using a <em>stopwatch</em> like<code>time</code>gives you a first
tool to log actual versus expected runtimes; it is also useful for
carrying out runtime comparisons.</li>
<li>Which hardware piece (CPU, memory/RAM, disk, network, etc.) poses a
limiting factor, depends on the nature of a particular application.</li>
<li>Large-scale computing is power hungry, so we want to use the energy
wisely. As shown in the next episodes, you have more <em>power</em> than
it may be expected over controlling job efficiency and thus overall
energy footprint.</li>
<li>Computing job efficiency goes beyond individual gain in runtime as
shared resources are used more effectively, that is, the ratio <span class="math inline">\(\frac{useful\;work}{total\;energy\;expended}\sim\frac{number\;of\;users}{total\;energy\;expended}\)</span>
improves.</li>
</ul></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="so-whats-next">So what’s next?<a class="anchor" aria-label="anchor" href="#so-whats-next"></a></h2>
<hr class="half-width"><p>The following episodes will put a number of these introductory
thoughts into concrete action by looking at efficiency aspects around a
compute-intense graphical program. While it is not directly an
action-loaded video game, it does contain essential pieces thereof,
because it uses the technique of ray tracing.</p>
<p>Ray tracing is a technique that simulates how light travels in a 3D
scene to create realistic images. It simulates the behaviour of light in
terms of optical effects like reflection, refraction, shadows,
absorption, etc. The underlying calculations involve real-world physics,
which makes them computationally expensive - a perfect HPC case.</p>
<p>Here is a basic run script:</p>
<pre><code>#!/usr/bin/bash
#SBATCH --time=01:00:00
#SBATCH --nodes=1
#SBATCH --tasks-per-node=4

# Put in the same "module load ..." command when building the raytracer program

time mpirun -np 4 raytracer -width=800 -height=800 -spp=128</code></pre>
<p>Check the<code>time</code>output at the end of the job’s output file
(named something like <code>slurm-&lt;NUMBER&gt;.out</code>). You will
notice that <em>user</em> time is by a certain factor larger than
<em>real</em> time.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div class="callout-inner">
<div class="callout-content">
<p>Why is the <code>user</code> timer larger than the <code>real</code>
time, and what does it mean?</p>
<p>Any guess which number in the <code>mpirun</code>line corresponds
roughly to that factor?</p>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="02_resourcerequirements.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="02_resourcerequirements.html" rel="next">
          Next: Resource...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/stderr-enst/jobefficiency/edit/main/episodes/01_introduction.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/stderr-enst/jobefficiency/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/stderr-enst/jobefficiency/" class="external-link">Source</a></p>
        <p>
        <a href="citation.html">Cite</a>
        | <a href="mailto:helpdesk@hpc.nrw">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
		</div>
		<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.18.4" class="external-link">sandpaper (0.18.4)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.9" class="external-link">varnish (1.0.9)</a></p>
		</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://stderr-enst.github.io/jobefficiency/01_introduction.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "hpc, software, data, lesson, The Carpentries",
  "name": "Introduction",
  "creativeWorkStatus": "active",
  "url": "https://stderr-enst.github.io/jobefficiency/01_introduction.html",
  "identifier": "https://stderr-enst.github.io/jobefficiency/01_introduction.html",
  "dateCreated": "2025-03-28",
  "dateModified": "2025-12-12",
  "datePublished": "2026-01-27"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

